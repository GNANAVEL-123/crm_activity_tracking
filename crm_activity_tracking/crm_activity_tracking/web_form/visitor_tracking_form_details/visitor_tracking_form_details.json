{
 "accept_payment": 0,
 "allow_comments": 0,
 "allow_delete": 0,
 "allow_edit": 0,
 "allow_incomplete": 0,
 "allow_multiple": 0,
 "allow_print": 0,
 "amount": 0.0,
 "amount_based_on_field": 0,
 "anonymous": 0,
 "apply_document_permissions": 0,
 "button_label": "",
 "client_script": "frappe.web_form.after_load = () => {\n    // \ud83c\udfa8 Style the QR Scanner field\n    const qrField = document.querySelector('[data-fieldname=\"qr_scanner\"] input');\n    if (qrField) {\n        qrField.style.backgroundColor = \"#e8f0fe\";\n        qrField.style.border = \"2px solid #007bff\";\n        qrField.style.borderRadius = \"6px\";\n        qrField.style.padding = \"8px\";\n        qrField.style.fontWeight = \"bold\";\n        qrField.style.color = \"#004085\";\n        qrField.placeholder = \"\ud83d\udd0d Scan or Enter QR Code here...\";\n    }\n\n    // \ud83d\udeab Hide Submit and Discard buttons\n    const hideButtons = () => {\n        const buttons = document.querySelectorAll(\n            '.btn-primary[data-label=\"Submit\"], .btn-secondary[data-label=\"Discard\"], .web-form-footer .btn, .web-form-actions .btn'\n        );\n        buttons.forEach(btn => (btn.style.display = \"none\"));\n    };\n    hideButtons();\n\n    // \u2705 Create and insert HTML table\n    const tableContainer = document.createElement(\"div\");\n    tableContainer.id = \"visitor-tracking-table\";\n    tableContainer.innerHTML = `\n        <h4 style=\"margin-top: 20px; color: #007bff;\">AMC Visitor Tracking Details</h4>\n        <table class=\"table\" style=\"\n            width: 100%;\n            border-collapse: collapse;\n            border-radius: 8px;\n            overflow: hidden;\n            box-shadow: 0 2px 6px rgba(0,0,0,0.1);\n        \">\n            <thead style=\"background-color: #007bff; color: white;\">\n                <tr>\n                    <th style=\"padding:10px; text-align:left;\">#</th>\n                    <th style=\"padding:10px; text-align:left;\">Customer</th>\n                    <th style=\"padding:10px; text-align:left;\">AMC Visitor Tracking</th>\n                    <th style=\"padding:10px; text-align:left;\">AMC Service Date</th>\n                </tr>\n            </thead>\n            <tbody id=\"visitor-tracking-body\">\n                <tr>\n                    <td colspan=\"4\" style=\"text-align:center; padding:10px; color:#888;\">\n                        No Data Available\n                    </td>\n                </tr>\n            </tbody>\n        </table>\n    `;\n\n    // Insert table above form footer\n    const formWrapper =\n        document.querySelector(\".web-form-footer\") ||\n        document.querySelector(\".web-form-actions\") ||\n        document.querySelector(\"form\");\n\n    formWrapper.parentNode.insertBefore(tableContainer, formWrapper);\n\n    // Re-hide any buttons loaded later\n    setTimeout(hideButtons, 1000);\n};\n\n// \ud83d\udd0d When QR is scanned\nfrappe.web_form.on(\"qr_scanner\", (field, value) => {\n    if (!value) return;\n\n    frappe.call({\n        method: \"crm_activity_tracking.crm_activity_tracking.doctype.visitor_tracking_details_scanner.visitor_tracking_details_scanner.get_qr_schedule_data\",\n        args: { qr_code: value },\n        callback: function (r) {\n            const tbody = document.getElementById(\"visitor-tracking-body\");\n            if (!tbody) return;\n\n            if (r.message && r.message.length > 0) {\n                tbody.innerHTML = \"\"; // clear existing\n                frappe.web_form.doc.amc_visitor_tracking_details = [];\n\n                r.message.forEach((data, index) => {\n                    frappe.web_form.doc.amc_visitor_tracking_details.push({\n                        customer: data.customer_name,\n                        amc_visitor_traking: data.amc_visitor_trcking,\n                        amc_service_date: data.amc_service_date\n                    });\n\n                    tbody.innerHTML += `\n                        <tr style=\"background-color: ${index % 2 === 0 ? '#f8f9fa' : '#ffffff'};\">\n                            <td style=\"padding:10px;\">${index + 1}</td>\n                            <td style=\"padding:10px;\">${data.customer_name || \"\"}</td>\n                            <td style=\"padding:10px;\">${data.amc_visitor_trcking || \"\"}</td>\n                            <td style=\"padding:10px;\">${data.amc_service_date || \"\"}</td>\n                        </tr>\n                    `;\n                });\n\n                frappe.show_alert(\"Visitor tracking data loaded successfully!\", 5);\n            } else {\n                tbody.innerHTML = `\n                    <tr>\n                        <td colspan=\"4\" style=\"text-align:center; padding:10px; color:#888;\">\n                            No matching AMC Visitor Tracking found\n                        </td>\n                    </tr>`;\n                frappe.msgprint(\"No matching AMC Visitor Tracking found for this QR.\");\n            }\n        }\n    });\n});\n",
 "condition_json": "[]",
 "creation": "2025-05-02 12:00:51.479523",
 "currency": "INR",
 "custom_css": "",
 "doc_type": "Visitor Tracking Details Scanner",
 "docstatus": 0,
 "doctype": "Web Form",
 "idx": 0,
 "is_standard": 1,
 "list_columns": [],
 "login_required": 0,
 "max_attachment_size": 0,
 "modified": "2025-10-05 16:14:17.201917",
 "modified_by": "Administrator",
 "module": "Crm Activity Tracking",
 "name": "visitor-tracking-form-details",
 "owner": "Administrator",
 "payment_button_label": "Buy Now",
 "published": 1,
 "route": "visitor-tracking-form-details",
 "show_attachments": 0,
 "show_list": 0,
 "show_sidebar": 0,
 "title": "Visitor Tracking Form Details",
 "web_form_fields": [
  {
   "allow_read_on_all_link_options": 0,
   "fieldname": "qr_scanner",
   "fieldtype": "Data",
   "hidden": 0,
   "label": "QR Scanner",
   "max_length": 0,
   "max_value": 0,
   "options": "Barcode",
   "precision": "",
   "read_only": 0,
   "reqd": 0,
   "show_in_filter": 0
  }
 ]
}